:root {
    --bg-color: #f5f5f5;
    --dot-color: #dcdcdc;
    --text-color: #666;
    --placeholder-bg: #e6e6e6;
    --app-icon-default: #cccccc;
    --app-icon-size: 62px;
    --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    font-family: var(--font-family);
    
    /* 【改动】Dock 颜色改为 D0D0D0 (RGB: 208, 208, 208) */
    /* 加了 0.8 的透明度，这样既有你要的灰色，又有 iOS 的磨砂玻璃感 */
    --dock-bg: rgba(208, 208, 208, 0.8);
    
    /* 汽水音乐主题色 */
    --soda-yellow: #fce76d;
    --soda-dark: #121212;
}

* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    user-select: none;
    -webkit-user-select: none;
    outline: none;
    -webkit-tap-highlight-color: transparent;
}

/* style.css */

html {
    /* 禁止系统自动调整字体大小 */
    -webkit-text-size-adjust: 100%;
    /* 强制占满高度 */
    height: 100%; 
}

body {
    margin: 0;
    padding: 0;
    /* 这里的背景色很重要！改成和你壁纸接近的颜色，这样就算有缝隙也看不出来！ */
    background-color: #f0f2f5; 
    /* 强制身体高度占满 html */
    height: 100%; 
    /* 禁止整个页面在浏览器里回弹橡皮筋效果 */
    overflow: hidden; 
}

/* 你的主容器（假设id叫 phone-screen） */
.phone-screen {
    width: 100%;
    /* 重点：用 100vh 强制撑开到视口高度 */
    height: 100vh; 
    position: relative;
    overflow: hidden;
    /* 确保它也有背景色 */
    background-color: #f0f2f5; 
    /* 背景点点 */
    background-image: 
        radial-gradient(var(--dot-color) 20%, transparent 20%), 
        radial-gradient(var(--dot-color) 20%, transparent 20%);
    background-position: 0 0, 15px 15px;
    background-size: 30px 30px;
}

/* 【修改 2】让桌面内容整体下移，不再顶着刘海 */
.desktop-content {
    /* 原来是 50px，现在改为 90px，给顶部留出更多呼吸感 */
    padding: 90px 20px 120px 20px; 
    display: flex;
    flex-direction: column;
    gap: 15px;
    height: 100%;
    overflow-y: auto;
    /* 增加平滑滚动 */
    -webkit-overflow-scrolling: touch; 
}

/* ==================== iOS 风格状态栏 ==================== */
.status-bar {
    height: 47px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 26px 0 26px;
    font-size: 15px;
    font-weight: 600;
    color: #000;
    z-index: 1000;
    position: absolute;
    top: 0;
    width: 100%;
    pointer-events: none; /* 让点击穿透状态栏 */
}

/* 左边区域：时间和星星并排 */
.status-left {
    display: flex;
    align-items: center;
    gap: 4px; /* 时间和星星之间的距离 */
}

/* 你的自定义小星星 */
.status-star {
    font-size: 12px; /* 星星稍微小一点点更精致 */
    margin-top: 1px;
    pointer-events: auto; /* ★★★ 关键！救回点击事件，让你可以编辑它！ */
    cursor: text;
}

.right-icons { 
    display: flex; 
    align-items: center; 
    gap: 6px; /* 图标之间的间距 */
}

/* 统一控制所有状态栏图标的大小 */
.status-icon {
    height: 18px; /* 这是一个很舒服的 iOS 图标高度 */
    width: auto;  /* 宽度自动保持比例 */
    display: block;
}

/* 如果觉得电池太大，可以单独微调电池 */
.icon-battery {
    height: 26px; /* 电池图标原图可能留白比较多，稍微放大一点点视觉上才平衡 */
}

/* 顶部组件区域 */
.top-widget-area {
    position: relative;
    height: 140px;
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    align-items: center;
    margin-top: 10px;
}

.side-pills { display: flex; flex-direction: column; gap: 15px; align-items: center; }
.pill { background: rgba(255,255,255,0.7); border-radius: 20px; padding: 8px 12px; font-size: 12px; color: #777; display: flex; align-items: center; justify-content: center; min-width: 80px; box-shadow: 0 2px 5px rgba(0,0,0,0.02); backdrop-filter: blur(5px); cursor: pointer; }
.center-avatar-area { display: flex; flex-direction: column; align-items: center; gap: 8px; margin-top: -10px; min-width: 120px; }
.avatar-circle { width: 80px; height: 80px; border-radius: 50%; background-color: var(--placeholder-bg); border: 3px solid #fff; box-shadow: 0 4px 10px rgba(0,0,0,0.05); position: relative; background-size: cover; background-position: center; cursor: pointer; }
.avatar-circle::after { content: '★'; position: absolute; bottom: 0; right: 0; color: #999; font-size: 12px; background: #fff; border-radius: 50%; width: 16px; height: 16px; display: flex; justify-content: center; align-items: center; pointer-events: none; }
.widget-text-sm { font-size: 10px; color: #999; text-align: center; cursor: pointer; }
.widget-title { font-size: 12px; color: #555; margin-top: 5px; cursor: pointer; }

/* 照片墙组件 */
.photo-widget-area { height: 150px; position: relative; margin-top: 35px; display: flex; justify-content: center; }
.polaroid { background: #fff; padding: 6px 6px 20px 6px; box-shadow: 0 4px 8px rgba(0,0,0,0.08); position: absolute; width: 100px; height: 120px; display: flex; flex-direction: column; align-items: center; }
.polaroid-img { width: 100%; height: 100%; background-color: var(--placeholder-bg); border: 1px solid #f0f0f0; background-size: cover; background-position: center; cursor: pointer; }
.p-left { transform: rotate(-6deg) translate(-90px, 10px); z-index: 1; }
.p-center { transform: rotate(2deg) translate(0px, 0px); z-index: 2; }
.p-right { transform: rotate(5deg) translate(90px, 15px); z-index: 1; }
.clip { position: absolute; width: 10px; height: 25px; border: 2px solid #aaa; border-radius: 10px; top: -10px; left: 10px; background: transparent; z-index: 3; pointer-events: none; }
.widget-label-centered { position: absolute; bottom: -24px; width: 100%; text-align: center; font-size: 12px; color: #555; cursor: pointer; }

/* APP 网格 */
.app-grid { display: grid; grid-template-columns: repeat(4, 1fr); row-gap: 20px; column-gap: 15px; margin-top: 30px; padding: 0 5px; }
.app-item { display: flex; flex-direction: column; align-items: center; gap: 6px; cursor: pointer; transition: transform 0.1s; }
.app-item:active { transform: scale(0.95); }
.app-icon { width: var(--app-icon-size); height: var(--app-icon-size); background-color: var(--app-icon-default); border-radius: 14px; position: relative; overflow: hidden; background-size: cover; background-position: center; }
.app-icon::before { content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(135deg, transparent 40%, rgba(255,255,255,0.4) 100%); pointer-events: none; }
.app-name { font-size: 11px; color: #333; text-align: center; cursor: pointer; }

.search-pill { margin: 10px auto 0; background: rgba(255,255,255,0.5); padding: 4px 12px; border-radius: 20px; display: flex; align-items: center; gap: 5px; font-size: 11px; color: #555; backdrop-filter: blur(10px); cursor: pointer; width: fit-content; }

/* Dock 栏 */
.dock { 
    position: absolute; 
    
    /* ★★★ 修改重点 1：用 calc 精确计算 ★★★ */
    /* 意思是：距离底部 = 8px (美观缝隙) + iPhone黑条的高度 */
    /* 这样它就会乖乖贴在黑条上面一点点，不会飞太高 */
    bottom: calc(8px + env(safe-area-inset-bottom)); 
    
    left: 15px;
    right: 15px;
    height: 100px; /* 原来是120px，稍微改矮一丢丢更精致 */
    background: var(--dock-bg);
    backdrop-filter: blur(25px); -webkit-backdrop-filter: blur(25px);
    border-radius: 38px; /* 圆角稍微改小一点点，更像 iOS */
    display: flex;
    justify-content: space-around;
    align-items: center;
    padding: 0 10px;
    z-index: 50; 
    
    /* ★★★ 修改重点 2：一定要把这行 margin-bottom 删掉！ ★★★ */
    /* margin-bottom: calc(20px + env(safe-area-inset-bottom));  <-- 删掉这行！*/
}

/* style.css */

.home-bar { 
    position: absolute;     
    
    /* 1. 平时（黑色时）的位置：追求极致美观，贴底！ */
    bottom: 8px; 
    
    left: 50%; 
    transform: translateX(-50%); 
    width: 130px; 
    height: 5px; 
    background-color: #000; 
    border-radius: 3px; 
    z-index: 1000; 
    cursor: pointer; 
}

/* ★★★ 新增：专门给隐藏模式用的“隐形大按钮”样式 ★★★ */
.home-bar.hidden-mode {
    /* 1. 位置上移：避开苹果的黑条 */
    bottom: 10px; 
    
    /* 2. 变得很宽很高：虽然看不见，但触摸面积超级大！ */
    width: 200px;  /* 变宽 */
    height: 30px;  /* 变高 */
    
    /* 3. 强制透明 */
    background-color: transparent !important; 
    
    /* 4. 甚至可以把 padding 也撑大点，确保万无一失 */
    padding: 10px;
}

.home-bar:active { background-color: #555; }

.star-decoration { position: absolute; font-size: 24px; color: #b0b0b0; top: 250px; left: 20px; transform: rotate(-15deg); z-index: 0; }

/* 【改动4】iOS风输入框样式 */
[contenteditable="true"] {
    background-color: rgba(235, 235, 240, 0.8); /* iOS输入框的浅灰色 */
    border-radius: 6px;
    padding: 2px 6px; /* 稍微多点内边距 */
    box-shadow: none; /* 去掉原来的蓝框 */
    /* iOS蓝色光标色 */
    caret-color: #007aff; 
    min-width: 20px;
    cursor: text;
    transition: background-color 0.2s;
}
/* 编辑时的聚焦状态 */
[contenteditable="true"]:focus {
    background-color: rgba(225, 225, 230, 0.9);
    outline: none; /* 确保无默认边框 */
}

/* ==================== 新增APP页面通用样式 ==================== */
.app-window, .sub-page-root { /* 增加 sub-page-root 支持根目录子页面 */
    position: fixed;
    top: 0; left: 0; width: 100%; height: 100%;
    background: #fff;
    z-index: 999;
    display: none;
    flex-direction: column;
    /* 移除圆角变化动画，因为现在是全屏了 */
    animation: openApp 0.3s cubic-bezier(0.2, 0.8, 0.2, 1);
    overflow: hidden;
}

@keyframes openApp {
    from { transform: scale(0.95); opacity: 0; } /* 稍微改了下动画，更自然 */
    to { transform: scale(1); opacity: 1; }
}

/* ==================== 微信 ==================== */
/* ... (微信主界面样式省略，保持不变) ... */
.wx-header { background: #fff; padding: 50px 16px 10px; display: flex; flex-direction: column; gap: 12px; z-index: 50; position: relative; }
.wx-header-top { display: flex; align-items: center; justify-content: space-between; }
.wx-h-left { position: relative; }
.wx-small-avatar { width: 36px; height: 36px; border-radius: 50%; background-color: #eee; background-size: cover; background-position: center; border: 1px solid rgba(0,0,0,0.05); }
.wx-h-center { flex: 1; margin-left: 10px; display: flex; flex-direction: column; justify-content: center; }
.wx-h-name { font-size: 16px; font-weight: 600; color: #111; line-height: 1.2; }
.wx-h-status { font-size: 11px; color: #ff9500; margin-top: 2px; display: flex; align-items: center; cursor: pointer; }
.wx-search-wrapper { width: 100%; }
.wx-search-bar { background: #f0f0f0; height: 36px; border-radius: 10px; display: flex; justify-content: center; align-items: center; gap: 6px; color: #888; font-size: 15px; }
.wx-search-icon { width: 16px; height: 16px; fill: #888; }
.wx-content-area { flex: 1; background: #fff; overflow-y: auto; }
.wx-scroll-view { height: 100%; padding-bottom: 60px; }
.wx-tab-bar { height: 80px; background: #f9f9f9; border-top: 1px solid rgba(0,0,0,0.1); display: flex; justify-content: space-around; padding-top: 8px; position: absolute; bottom: 0; left: 0; right: 0; z-index: 100; }
.wx-tab-item { display: flex; flex-direction: column; align-items: center; gap: 2px; color: #111; opacity: 0.5; transition: opacity 0.2s; cursor: pointer; }
.wx-tab-item.active { opacity: 1; font-weight: 500; }
.wx-tab-icon svg { width: 28px; height: 28px; fill: currentColor; }
.wx-tab-item span { font-size: 10px; }

/* ==================== 4. 个人主页 (P2 清冷风) ==================== */
#wx-profile-view {
    position: fixed;
    top: 0; left: 0; width: 100%; height: 100%;
    background: #fff; /* 纯白背景 */
    z-index: 999;
    display: none;
    flex-direction: column;
    padding: 0 20px;
    animation: slideInRight 0.3s ease;
}

/* 顶部导航 */
.wx-p3-nav {
    height: 60px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-top: 20px;
}
.wx-p3-nav .wx-p2-back svg {
    width: 28px; height: 28px; fill: #333;
}

.wx-p3-container {
    display: flex;
    flex-direction: column;
    align-items: flex-start; /* 左对齐 */
    margin-top: 20px;
}

.wx-p3-header-area {
    position: relative;
    margin-bottom: 20px;
    margin-top: 30px;
    width: 100%; /* ★★★ 必须加这句！不然头像会缩在左边出不去！ */
    height: 100px; /* 给个固定高度，防止塌陷 */
}

/* 那个灰色的气泡框 */
.wx-p3-bubble {
    position: absolute;
    top: -50px; left: 60px; /* 在头像右上方 */
    background: #a8a8a8; /* 深灰色 */
    color: #fff;
    padding: 8px 16px;
    border-radius: 20px;
    font-size: 13px;
    white-space: nowrap;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    animation: floatBubble 3s ease-in-out infinite;
}
/* 气泡的小尾巴 */
.wx-p3-bubble::after {
    content: '';
    position: absolute;
    bottom: -6px; left: 20px;
    width: 0; height: 0;
    border-left: 6px solid transparent;
    border-right: 6px solid transparent;
    border-top: 8px solid #a8a8a8;
}

@keyframes floatBubble {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-5px); }
}

/* 大头像 */
.wx-big-avatar-new {
    width: 100px; height: 100px;
    border-radius: 50%;
    
    /* 【修改这里】去掉原来的 background-color: #333; 
       换成下面这个超好看的“梦幻糖果”渐变！ 
       (你可以自己改颜色代码，想要什么色都行) */
    background: linear-gradient(135deg, #fdfbfb 0%, #ebedee 100%); /* 这是一个干净的银白渐变，很像贴纸底纸 */
    /* 或者试试这个粉蓝色的： */
    /* background: linear-gradient(135deg, #a18cd1 0%, #fbc2eb 100%); */
    
    border: 3px solid #fff;
    box-shadow: 0 0 0 1px #ddd, 0 10px 20px rgba(0,0,0,0.05);
    
    background-size: cover; 
    background-position: center;
    cursor: pointer;
}


/* 名字和信息块 */
.wx-p3-info-block {
    margin-left: 10px;
    margin-bottom: 25px;
}

.wx-p3-name {
    font-size: 20px;
    font-weight: bold;
    color: #333;
    margin-bottom: 8px;
    position: relative;
    display: inline-block;
}
/* 名字旁边的小图标装饰 */
.wx-p3-name::after {
    content: '★';
    font-size: 14px;
    margin-left: 5px;
    vertical-align: middle;
}

.wx-p3-id {
    font-size: 14px;
    color: #999;
    margin-bottom: 12px;
    padding-left: 12px;
    border-left: 3px solid #eee; /* 竖线装饰 */
}

.wx-p3-desc {
    font-size: 14px;
    color: #555;
    line-height: 1.6;
}

/* 标签区 */
.wx-p3-tags {
    display: flex;
    flex-direction: column;
    gap: 10px;
    width: 100%;
}

.wx-p3-tag {
    padding: 10px 15px;
    border-radius: 8px;
    background: #f9f9f9;
    font-size: 14px;
    color: #666;
    border-left: 4px solid #ddd; /* 左侧色块 */
}
.wx-p3-tag.grey {
    background: #e0e0e0;
    color: #555;
    border-left: 4px solid #999;
}

/* 底部链接 */
.wx-p3-footer {
    margin-top: 40px;
    font-size: 12px;
    color: #aaa;
    text-align: center;
    width: 100%;
    line-height: 1.5;
}

/* ==================== 其他APP和通用样式 (保持不变) ==================== */
/* ... (汽水音乐、设置页样式省略，保持不变) ... */
.music-ui { background: var(--soda-dark); color: #fff; height: 100%; display: flex; flex-direction: column; position: relative; overflow: hidden; }
.soda-bg-blur { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(180deg, rgba(30,30,30,0.8), #000); z-index: 0; filter: blur(40px); opacity: 0.6; }
.soda-top-bar { position: relative; z-index: 10; height: 44px; margin-top: 50px; display: flex; justify-content: center; align-items: center; gap: 20px; font-size: 16px; font-weight: 600; color: rgba(255,255,255,0.5); }
.soda-tab.active { color: #fff; position: relative; }
.soda-tab.active::after { content: ''; position: absolute; bottom: -6px; left: 50%; transform: translateX(-50%); width: 16px; height: 3px; background: var(--soda-yellow); border-radius: 2px; }
.soda-main-content { flex: 1; position: relative; z-index: 10; display: flex; flex-direction: column; justify-content: center; align-items: center; width: 100%; }
.soda-album-cover { width: 300px; height: 300px; background: #333; border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.3); background-size: cover; background-position: center; position: relative; }
.soda-side-actions { position: absolute; right: 15px; bottom: 20px; display: flex; flex-direction: column; gap: 25px; align-items: center; }
.s-action-item { display: flex; flex-direction: column; align-items: center; gap: 4px; opacity: 0.9; }
.s-action-icon { width: 30px; height: 30px; fill: #fff; filter: drop-shadow(0 2px 4px rgba(0,0,0,0.5)); }
.s-action-text { font-size: 10px; font-weight: 500; text-shadow: 0 1px 2px rgba(0,0,0,0.5); }
.soda-bottom-area { position: relative; z-index: 10; padding: 0 20px 40px; background: linear-gradient(to top, #000 10%, transparent); }
.soda-info { margin-bottom: 20px; width: 75%; }
.soda-title { font-size: 20px; font-weight: bold; margin-bottom: 6px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.soda-artist { font-size: 14px; color: rgba(255,255,255,0.7); display: flex; align-items: center; gap: 5px; }
.soda-tag { font-size: 10px; background: rgba(255,255,255,0.15); padding: 1px 4px; border-radius: 3px; color: var(--soda-yellow); }
.soda-progress-container { height: 20px; display: flex; align-items: center; gap: 10px; font-size: 10px; color: #888; }
.soda-progress-bg { flex: 1; height: 3px; background: rgba(255,255,255,0.15); border-radius: 2px; position: relative; }
.soda-progress-fill { width: 30%; height: 100%; background: var(--soda-yellow); border-radius: 2px; position: absolute; }
.soda-progress-thumb { width: 10px; height: 10px; background: #fff; border-radius: 50%; position: absolute; right: -5px; top: -3.5px; }
.soda-controls { display: flex; justify-content: space-between; align-items: center; margin-top: 10px; padding: 0 10px; }
.sc-btn { width: 24px; height: 24px; fill: #fff; opacity: 0.8; cursor: pointer; }
.sc-btn:active { opacity: 0.5; }
.sc-play-btn { width: 60px; height: 60px; background: #fff; border-radius: 50%; display: flex; justify-content: center; align-items: center; cursor: pointer; }
.sc-play-icon { width: 24px; height: 24px; fill: #000; margin-left: 2px; }
.sc-pause-icon { width: 24px; height: 24px; fill: #000; margin-left: 0; display: none; }
.sc-play-btn.playing .sc-play-icon { display: none; }
.sc-play-btn.playing .sc-pause-icon { display: block; }

.settings-ui { background: #f2f2f7; height: 100%; display: flex; flex-direction: column; }
.settings-header-area { padding: 50px 16px 10px 16px !important; background: #f2f2f7; display: flex; flex-direction: column; gap: 8px; }
.settings-big-title { font-size: 34px; font-weight: 700; color: #000; margin-bottom: 5px; margin-left: 4px; line-height: 1.2; }
.settings-search-bar { background: #e3e3e8; height: 38px; border-radius: 10px; display: flex; align-items: center; padding: 0 10px; color: #8e8e93; font-size: 17px; width: 100%; box-sizing: border-box; }
.s-search-icon { width: 18px; height: 18px; fill: #8e8e93; flex-shrink: 0; }
.s-mic-icon { width: 18px; height: 18px; fill: #8e8e93; flex-shrink: 0; opacity: 0.7; }
.s-search-placeholder { flex: 1; margin-left: 8px; text-align: left; font-size: 17px; line-height: normal; }
.settings-list { padding: 0 16px; flex: 1; overflow-y: auto; padding-bottom: 40px; }
/* 修复设置页头像不显示的问题 */
.settings-list .profile-avatar {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background-color: #ddd;
    background-size: cover;
    background-position: center;
    flex-shrink: 0;
    border: 1px solid rgba(0,0,0,0.1);
}
.s-group { background: #fff; border-radius: 10px; overflow: hidden; margin-bottom: 18px; }
.s-item { padding: 0 16px; display: flex; justify-content: space-between; align-items: center; height: 48px; cursor: pointer; font-size: 16px; position: relative; }
.s-item:not(:last-child)::after { content: ''; position: absolute; bottom: 0; left: 56px; right: 0; height: 1px; background: #c6c6c8; transform: scaleY(0.5); }
.s-item:active { background: #e5e5ea; }
.profile-item { height: 80px !important; }
.profile-item::after { left: 16px !important; }
.profile-info { display: flex; flex-direction: column; gap: 2px; }
.profile-desc { font-size: 12px; color: #666; }
.s-left { display: flex; align-items: center; gap: 14px; }
.ios-icon-img { width: 29px; height: 29px; border-radius: 6px; object-fit: cover; }
.ios-icon-bg { width: 29px; height: 29px; border-radius: 6px; display: flex; justify-content: center; align-items: center; color: #fff; }
.ios-icon-svg { width: 18px; height: 18px; fill: currentColor; }
.s-right { display: flex; align-items: center; gap: 6px; }
.s-status { font-size: 15px; color: #8e8e93; }
/* 设置列表右侧的箭头 */
.s-arrow {
    color: #c4c4c7; /* 保持原来的灰色 */
    
    /* ★★★ 核心修改：加大、加粗！ ★★★ */
    font-size: 22px;    /* 比原来的 20px 大了很多！ */
    font-weight: 500;   /* 变粗了！ */
    
    /* 换个字体，让箭头形状更像 iOS */
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    
    /* 微调一下位置，让它垂直居中 */
    margin-top: -3px;
    /* 稍微纵向拉伸一点点，更显修长 */
    transform: scaleY(1.1);
    
    /* 确保它不会挤压到左边的文字 */
    margin-left: auto;
    padding-left: 10px;
}
.ios-switch { position: relative; display: inline-block; width: 51px; height: 31px; }
.ios-switch input { opacity: 0; width: 0; height: 0; }
.slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #e9e9ea; transition: .4s; border-radius: 34px; }
.slider:before { position: absolute; content: ""; height: 27px; width: 27px; left: 2px; bottom: 2px; background-color: white; transition: .4s; border-radius: 50%; box-shadow: 0 2px 4px rgba(0,0,0,0.2); }
input:checked + .slider { background-color: #34c759; }
input:checked + .slider:before { transform: translateX(20px); }
.sub-page { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: #f2f2f7; z-index: 20; transform: translateX(100%); transition: transform 0.3s ease; display: flex; flex-direction: column; }
.sub-page.active { transform: translateX(0); }
.sub-header { height: 88px; background: #f2f2f7; padding-top: 40px; display: flex; align-items: center; padding-left: 8px; border-bottom: 0.5px solid #c6c6c8; font-weight: 600; font-size: 17px; }
.back-btn { padding: 10px; color: #007aff; cursor: pointer; font-weight: normal; font-size: 17px; display: flex; align-items: center; gap: 4px; }
.sub-content { padding: 20px 16px; }
.bg-blue { background-color: #007aff; }
.bg-teal { background-color: #5ac8fa; }
.bg-gray { background-color: #8e8e93; }
.bg-orange { background-color: #ff9500; }
.bg-green { background-color: #34c759; }

/* ---------------------------- */
/* 动画定义 (Slide In Right) */
@keyframes slideInRight {
    from { transform: translateX(100%); }
    to { transform: translateX(0); }
}
/* ==================== 个人页背景 & 对话 ==================== */

/* 1. 顶部大背景图 */
.wx-profile-cover {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 280px; 
/* 高度刚好盖过头像一半  */
    background-color: #ddd; 
    background-size: cover;
    background-position: center;
    z-index: 0; 
    mask-image: linear-gradient(to bottom, black 80%, transparent 100%);
    -webkit-mask-image: linear-gradient(to bottom, black 80%, transparent 100%);
}

/* 修正层级：确保文字和头像浮在背景上面 */
.wx-p3-nav, .wx-p3-container {
    position: relative;
    z-index: 10;
}

/* ==================== 位置修正版==================== */

/* 1. 调整容器高度，给下面腾出足够的空间放头像 */
.wx-p3-header-area {
    position: relative;
    margin-bottom: 20px;
    margin-top: 30px;
    width: 100%;
    /* ★★★ 重点：把高度拉高 ★★★ */
    height: 140px; 
}

/* 2. 右边的气泡 (灰黑色，移动到大头像右下方) */
.wx-p3-bubble-right {
    position: absolute;
    top: auto; 
    bottom: 80px;
    right: 10px;
    background: #333;
    color: #fff;
    padding: 8px 16px;
    border-radius: 20px;
    font-size: 13px;
    max-width: 180px; 
    box-shadow: 0 4px 10px rgba(0,0,0,0.15);
    z-index: 20;
    
    /* 【新增】让它也跳动起来！ */
    animation: floatBubble 3s ease-in-out infinite;
    /* 【新增】让它比左边的晚一点跳，形成此起彼伏的效果 */
    animation-delay: 1.5s; 
}


/* 右边气泡的小尾巴 */
.wx-p3-bubble-right::after {
    content: '';
    position: absolute;
    bottom: -6px; 
    right: 20px; 
    width: 0; height: 0;
    border-left: 6px solid transparent;
    border-right: 6px solid transparent;
    border-top: 8px solid #333;
}

/* 3. 右边的小头像 (移动到最右下方，给你垫底) */
.wx-small-avatar-right {
    position: absolute;
    /* ★★★ 关键修改：清除 top，改为 bottom 定位 ★★★ */
    top: auto;
    bottom: 10px; /* 沉到最下面去 */
    right: 0;     /* 靠最右边 */
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background-color: #333;
    border: 2px solid #fff;
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    background-size: cover;
    background-position: center;
    cursor: pointer;
    z-index: 20;
}

/* ==================== 修复点击穿透 ==================== */
/* 1. 让覆盖在上面的容器“不阻挡点击”，鼠标可以直接点到下面的背景图 */
.wx-p3-nav, .wx-p3-container {
    pointer-events: none; 
}

/* 2. 但是！里面的按钮、头像、气泡、文字必须能点！
   我们要单独把它们的点击权“救”回来 */
.wx-p2-back,           /* 返回按钮 */
.wx-p3-bubble,         /* 左气泡 */
.wx-p3-bubble-right,   /* 右气泡 */
.wx-big-avatar-new,    /* 大头像 */
.wx-small-avatar-right,/* 小头像 */
.edit-text             /* 所有可编辑的文字 */
{
    pointer-events: auto;
}

/* style.css 追加内容 */

/* === Blink 风格 顶部切换药丸 === */
.wx-blink-tabs {
    display: flex;
    background: #fff;
    border-radius: 20px;
    padding: 4px;
    gap: 5px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
}
.blink-tab {
    padding: 6px 16px;
    border-radius: 16px;
    font-size: 13px;
    font-weight: 600;
    color: #999;
    cursor: pointer;
    transition: all 0.2s;
}
.blink-tab.active {
    background: #333; /* 选中变黑 */
    color: #fff;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
}

/* === Blink 风格 消息列表卡片 (仿 P1/P4) === */
.blink-card {
    background: #fff;
    border-radius: 18px; /* 大圆角 */
    padding: 12px;
    display: flex;
    align-items: center;
    margin-bottom: 12px; /* 卡片间距 */
    box-shadow: 0 4px 15px rgba(0,0,0,0.03); /* 极淡的阴影 */
    transition: transform 0.1s;
    cursor: pointer;
}
.blink-card:active {
    transform: scale(0.98);
}
.b-avatar {
    width: 50px;
    height: 50px;
    border-radius: 14px; /* 头像也是圆角矩形 */
    background-color: #eee;
    background-size: cover;
    background-position: center;
    flex-shrink: 0;
    margin-right: 12px;
}
.b-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
    gap: 4px;
}
.b-top {
    display: flex;
    justify-content: space-between;
    align-items: center;
}
.b-name {
    font-size: 16px;
    font-weight: 600;
    color: #333;
}
.b-time {
    font-size: 11px;
    color: #bbb;
}
.b-msg {
    font-size: 13px;
    color: #888;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 200px;
}

/* === iOS 风格表单 (用于添加联系人) === */
.ios-form-group {
    background: #fff;
    border-radius: 10px;
    overflow: hidden;
    margin: 0 16px;
}
.ios-input-row {
    height: 50px;
    display: flex;
    align-items: center;
    padding: 0 16px;
    border-bottom: 0.5px solid #e5e5ea;
}
.ios-input-row:last-child {
    border-bottom: none;
}
.ios-input-row input {
    width: 100%;
    border: none;
    font-size: 16px;
    outline: none;
    background: transparent;
}

/* === 通讯录列表样式 === */
.contact-header-item {
    background: #fff;
    height: 56px;
    display: flex;
    align-items: center;
    padding: 0 16px;
    border-bottom: 0.5px solid #f0f0f0;
    cursor: pointer;
}
.c-icon-box {
    width: 36px;
    height: 36px;
    border-radius: 6px;
    display: flex;
    justify-content: center;
    align-items: center;
    margin-right: 12px;
}
.contact-label {
    padding: 20px 16px 8px;
    font-size: 12px;
    color: #999;
    font-weight: 600;
}
.contact-row {
    background: #fff;
    height: 60px;
    display: flex;
    align-items: center;
    padding: 0 16px;
    border-bottom: 0.5px solid #f5f5f5;
    cursor: pointer;
}
.contact-row:last-child { border-bottom: none; }
.c-avatar-small {
    width: 38px;
    height: 38px;
    border-radius: 6px;
    background-color: #eee;
    background-size: cover;
    background-position: center;
    margin-right: 12px;
}
.c-info {
    display: flex;
    flex-direction: column;
}
.c-row-name { font-size: 16px; font-weight: 500; color: #333; }
.c-row-desc { font-size: 12px; color: #999; margin-top: 2px; }
