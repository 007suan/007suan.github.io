/* ==========================================================================
   1. ROOT VARIABLES & GLOBAL RESET (全局变量与重置)
   ========================================================================== */
:root {
    --bg-color: #f5f5f5;
    --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    --dot-color: #dcdcdc;
    --text-color: #666;
    --placeholder-bg: #e6e6e6;
    --app-icon-default: #cccccc;
    --app-icon-size: 62px;
    
    /* Dock 颜色 (带磨砂感) */
    --dock-bg: rgba(208, 208, 208, 0.8);
    
    /* 汽水音乐主题色 */
    --soda-yellow: #fce76d;
    --soda-dark: #121212;
    
    font-family: var(--font-family);
} 

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    -webkit-tap-highlight-color: transparent;
    -webkit-user-select: none;
    user-select: none;
}

input, textarea, [contenteditable="true"] {
    -webkit-user-select: text;
    user-select: text;
}

html {
    -webkit-text-size-adjust: 100%;
    height: 100%; 
}

body {
    margin: 0;
    padding: 0;
    background-color: #f0f2f5; 
    height: 100%; 
    overflow: hidden; 
}

/* iOS风输入框样式 */
[contenteditable="true"] {
    background-color: rgba(235, 235, 240, 0.8);
    border-radius: 6px;
    padding: 2px 6px;
    caret-color: #007aff; 
    min-width: 20px;
    cursor: text;
    transition: background-color 0.2s;
}
[contenteditable="true"]:focus {
    background-color: rgba(225, 225, 230, 0.9);
    outline: none;
}

/* ==========================================================================
   2. PHONE CONTAINER & LAYOUT (手机容器与布局)
   ========================================================================== */
.phone-screen {
    width: 100%;
    height: 100vh; /* 强制撑满 */
    position: relative;
    overflow: hidden;
    background-color: #f0f2f5; 
    background-image: radial-gradient(#d1d1d6 1.5px, transparent 1.5px);
    background-size: 24px 24px;
    z-index: 1;
}

/* 桌面内容容器 */
.desktop-content {
    padding: 90px 20px 120px 20px; /* 顶部留白避开刘海 */
    display: flex;
    flex-direction: column;
    gap: 15px;
    height: 100%;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch; 
}

/* ==========================================================================
   3. STATUS BAR & HOME BAR (状态栏与底部条)
   ========================================================================== */
.status-bar { height: 47px; display: flex; justify-content: space-between; align-items: center; padding: 12px 26px 0 26px; font-size: 15px; font-weight: 600; color: #000; z-index: 1000; position: absolute; top: 0; width: 100%; pointer-events: none; }
.status-left { display: flex; align-items: center; gap: 4px; }
.status-star { font-size: 12px; margin-top: 1px; pointer-events: auto; cursor: text; }
.right-icons { display: flex; align-items: center; gap: 6px; }
.status-icon { height: 18px; width: auto; display: block; }
.icon-battery { height: 26px; }
.home-bar { position: fixed;     bottom: 8px; left: 50%; transform: translateX(-50%); width: 130px; height: 5px; background-color: #000; border-radius: 3px; z-index: 1000; cursor: pointer; }
/* 隐形大按钮模式 */
.home-bar.hidden-mode { bottom: 10px; width: 200px; height: 30px; background-color: transparent !important; padding: 10px; }
.home-bar:active { background-color: #555; }
/* ==========================================================================
   4. DESKTOP WIDGETS (桌面组件)
   ========================================================================== */
/* 顶部药丸与头像 */
.top-widget-area { position: relative; height: 140px; display: grid; grid-template-columns: 1fr auto 1fr; align-items: center; margin-top: 20px; }
.side-pills { display: flex; flex-direction: column; gap: 15px; align-items: center; }
.pill { background: rgba(255,255,255,0.8); border-radius: 20px; padding: 8px 12px; font-size: 12px; color: #777; display: flex; align-items: center; justify-content: center; min-width: 80px; box-shadow: 0 2px 5px rgba(0,0,0,0.3); backdrop-filter: blur(5px); cursor: pointer; }
.center-avatar-area { display: flex; flex-direction: column; align-items: center; gap: 8px; margin-top: -10px; min-width: 120px; }
.avatar-circle { width: 80px; height: 80px; border-radius: 50%; background-color: var(--placeholder-bg); border: 3px solid #fff; box-shadow: 0 4px 10px rgba(0,0,0,0.35); position: relative; background-size: cover; background-position: center; cursor: pointer; }
.avatar-circle::after { content: '★'; position: absolute; bottom: 0; right: 0; color: #999; font-size: 12px; background: #fff; border-radius: 50%; width: 16px; height: 16px; display: flex; justify-content: center; align-items: center; pointer-events: none; }
.widget-text-sm { font-size: 10px; color: #999; text-align: center; cursor: pointer; }
.widget-title { font-size: 12px; color: #555; margin-top: 5px; cursor: pointer; }

/* 照片墙 */
.photo-widget-area { height: 150px; position: relative; margin-top: 35px; display: flex; justify-content: center; }
.polaroid { background: #fff; padding: 6px 6px 20px 6px; box-shadow: 0 4px 8px rgba(0,0,0,0.4); position: absolute; width: 100px; height: 120px; display: flex; flex-direction: column; align-items: center; }
.polaroid-img { width: 100%; height: 100%; background-color: var(--placeholder-bg); border: 1px solid #f0f0f0; background-size: cover; background-position: center; cursor: pointer; }
.p-left { transform: rotate(-6deg) translate(-90px, 10px); z-index: 1; }
.p-center { transform: rotate(2deg) translate(0px, 0px); z-index: 2; }
.p-right { transform: rotate(5deg) translate(90px, 15px); z-index: 1; }
.clip { position: absolute; width: 10px; height: 25px; border: 2px solid #aaa; border-radius: 10px; top: -10px; left: 10px; background: transparent; z-index: 3; pointer-events: none; }
.widget-label-centered { position: absolute; bottom: -24px; width: 100%; text-align: center; font-size: 12px; color: #555; cursor: pointer; }
.star-decoration { position: absolute; font-size: 24px; color: #b0b0b0; top: 250px; left: 20px; transform: rotate(-15deg); z-index: 0; }
/* APP 图标 */
.app-grid { display: grid; grid-template-columns: repeat(4, 1fr); row-gap: 20px; column-gap: 15px; margin-top: 30px; padding: 0 10px; width: 100%; }
.app-item { display: flex; flex-direction: column; align-items: center; gap: 6px; cursor: pointer; transition: transform 0.1s; }
.app-item:active { transform: scale(0.95); }
.app-icon { width: var(--app-icon-size); height: var(--app-icon-size); background-color: var(--app-icon-default); border-radius: 14px; position: relative; overflow: hidden; background-size: cover; background-position: center; }
/* 图标光泽感 */
.app-icon::before { content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(135deg, transparent 40%, rgba(255,255,255,0.4) 100%); pointer-events: none; }
.app-name { font-size: 11px; color: #333; text-align: center; cursor: pointer; }
.search-pill { margin: 10px auto 0; background: rgba(255,255,255,0.5); padding: 4px 12px; border-radius: 20px; display: flex; align-items: center; gap: 5px; font-size: 11px; color: #555; backdrop-filter: blur(10px); cursor: pointer; width: fit-content; }

/* Dock */
.dock { position: absolute; bottom: 5px; left: 15px; right: 15px; height: 100px; background: var(--dock-bg); backdrop-filter: blur(25px); -webkit-backdrop-filter: blur(25px); border-radius: 38px; display: flex; justify-content: space-around; align-items: center; padding: 0 10px; z-index: 50; }

/* ==========================================================================
   5. APP WINDOWS SYSTEM (窗口系统)
   ========================================================================== */
.app-window, .sub-page-root { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #fff; z-index: 999; display: none; flex-direction: column; animation: openApp 0.3s cubic-bezier(0.2, 0.8, 0.2, 1); overflow: hidden; }

@keyframes openApp {
    from { transform: scale(0.95); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
}

.sub-page { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: #f2f2f7; z-index: 20; transform: translateX(100%); transition: transform 0.3s ease; display: flex; flex-direction: column; }
.sub-page.active { transform: translateX(0); }
.sub-header { height: 88px; background: #f2f2f7; padding-top: 60px; display: flex; align-items: center; padding-left: 8px; border-bottom: 0.5px solid #c6c6c8; font-weight: 600; font-size: 17px; }
.back-btn { padding: 10px; color: #007aff; cursor: pointer; font-weight: normal; font-size: 17px; display: flex; align-items: center; gap: 4px; }
.sub-content { padding: 20px 16px; flex: 1; overflow-y: auto; overflow-x: hidden; -webkit-overflow-scrolling: touch; }

/* ==========================================================================
   6. WECHAT CORE (微信界面核心)
   ========================================================================== */
/* 微信顶栏  */
.wx-header { background: #F8F9F8; padding: 60px 16px 10px; display: flex; flex-direction: column; gap: 12px; z-index: 50; position: relative; border-bottom: 0.5px solid rgba(0, 0, 0, 0.1); }
.wx-header-top { display: flex; align-items: center; justify-content: space-between; }
.wx-h-left { position: relative; }
.wx-small-avatar { width: 36px; height: 36px; border-radius: 50%; background-color: #eee; background-size: cover; background-position: center; border: 1px solid rgba(0,0,0,0.05); }

/* 搜索框 */
.wx-search-bar { background: #E9E9EB; height: 33px; border-radius: 11px; display: flex; justify-content: center; align-items: center; gap: 6px; color: #888; font-size: 15px; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
.wx-search-icon { width: 20px; height: 16px; fill: #888; }
.wx-content-area { flex: 1; background: #fff; overflow-y: auto; }

/* 聊天切换栏 */
.wx-blink-tabs { display: flex; background: #fff; border-radius: 20px; padding: 4px; gap: 5px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
.blink-tab { padding: 6px 16px; border-radius: 16px; font-size: 13px; font-weight: 600; color: #999; cursor: pointer; transition: all 0.2s; }
.blink-tab.active { background: #333; color: #fff; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }

/* 底部悬浮Tab */
.wx-tab-bar { height: 65px; background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); border-top: 0.5px solid rgba(0,0,0,0.1); position: absolute; left: 0; right: 0; border-radius: 0; bottom: 30px; left: 20px; right: 20px; border-radius: 35px; box-shadow: 0 10px 40px rgba(0,0,0,0.1); display: flex; justify-content: space-around; align-items: flex-start; padding-top: 10px; z-index: 9999 !important; }
.wx-tab-item { display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 2px; width: 60px; cursor: pointer; transition: transform 0.1s; }
.wx-tab-item:active { transform: scale(0.95); }
.wx-tab-icon svg { fill: #B0B0B0 !important; width: 26px !important; height: 26px !important; display: block !important; transition: fill 0.2s ease; }
.wx-tab-item span { display: block !important; font-size: 10px; font-weight: 500; color: #B0B0B0; transition: color 0.2s ease; }
.wx-tab-item.active .wx-tab-icon svg { fill: #007aff !important; }
.wx-tab-item.active span { color: #007aff; }

/* 右上角菜单 */
.wx-dropdown-menu { position: absolute; top: 45px; right: 10px; background: #4c4c4c; color: #fff; border-radius: 6px; width: 150px; padding: 5px 0; display: none; flex-direction: column; box-shadow: 0 5px 15px rgba(0,0,0,0.2); z-index: 200; }
.wx-dropdown-menu::after { content: ''; position: absolute; top: -6px; right: 10px; border-left: 6px solid transparent; border-right: 6px solid transparent; border-bottom: 6px solid #4c4c4c; }
.wx-dropdown-menu.active { display: flex; animation: fadeIn 0.2s; }
.wx-dd-item { display: flex; align-items: center; gap: 10px; padding: 12px 15px; font-size: 14px; cursor: pointer; }
.wx-dd-item:active { background: rgba(255,255,255,0.1); }
.wx-dd-item svg { width: 20px; height: 20px; fill: #fff; }
.wx-dd-divider { height: 1px; background: rgba(255,255,255,0.1); margin: 0 10px; }

/* 底部选择 Sheet */
.selector-sheet { background: #fff; width: 100%; border-radius: 20px 20px 0 0; max-height: 70%; display: flex; flex-direction: column; padding-bottom: 20px; animation: slideUp 0.3s ease; }
.sheet-header { padding: 15px 20px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center; font-size: 16px; font-weight: bold; color: #333; }
.sheet-content { overflow-y: auto; padding: 0; }
.sheet-item { display: flex; align-items: center; padding: 12px 20px; border-bottom: 1px solid #f9f9f9; cursor: pointer; }
.sheet-item:active { background: #f5f5f5; }
.sheet-avatar { width: 40px; height: 40px; border-radius: 50%; background: #eee; margin-right: 12px; background-size: cover; background-position: center; }
.sheet-name { font-size: 16px; color: #333; font-weight: 500; }
.sheet-skip-btn { text-align: center; padding: 15px; color: #999; font-size: 14px; cursor: pointer; border-top: 5px solid #f5f5f5; }
@keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }

/* ==========================================================================
   7. WECHAT PROFILE (个人主页)
   =============================================================== */
#wx-profile-view { 
    /* ...原有属性保持不变... */
    position: fixed; 
    top: 0; left: 0; width: 100%; height: 100%; 
    background: #fff; 
    z-index: 10000 !important; 
    display: none; 
    flex-direction: column; 
    padding: 0 20px; 
    
    /* ★ 修改 3: 动画改成从左边滑入 */
    animation: slideInFromLeft 0.4s cubic-bezier(0.19, 1, 0.22, 1); 
}

/* 定义新的从左滑入动画 */
@keyframes slideInFromLeft { 
    from { transform: translateX(-100%); opacity: 0.8; } 
    to { transform: translateX(0); opacity: 1; } 
}

/* ★ 修改 1 & 2: 底部出口按钮 & 底部签名 */
.wx-p3-footer-area {
    position: absolute;
    bottom: 40px; /* 在小黑条上面 */
    left: 0;
    width: 100%;
    display: flex;
    justify-content: space-between; /*以此把按钮和文字分开*/
    align-items: flex-end;
    padding: 0 30px;
}

.wx-profile-close-btn {
    width: 44px; height: 44px;
    background: #f2f2f7;
    border-radius: 50%;
    display: flex; justify-content: center; align-items: center;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    cursor: pointer;
    color: #333;
    transition: transform 0.1s;
}
.wx-profile-close-btn:active { transform: scale(0.9); }

.wx-p3-footer-text {
    font-size: 12px; color: #ccc;
    margin-bottom: 10px; /*稍微对齐按钮中心*/
    text-align: right;
    font-weight: 500;
}
.wx-profile-cover { position: absolute; top: 0; left: 0; width: 100%; height: 280px; background-color: #ddd; background-size: cover; background-position: center; z-index: 0; -webkit-mask-image: linear-gradient(to bottom, black 80%, transparent 100%); }
.wx-p3-nav { height: 60px; display: flex; justify-content: space-between; align-items: center; padding-top: 60px; position: relative; z-index: 10; pointer-events: none; }
.wx-p3-container { display: flex; flex-direction: column; align-items: flex-start; margin-top: 20px; position: relative; z-index: 10; pointer-events: none; }
.wx-p2-back, .wx-big-avatar-new, .wx-small-avatar-right, .edit-text { pointer-events: auto; }
.wx-p3-header-area { position: relative; margin-bottom: 20px; margin-top: 100px; width: 100%; height: 140px; }
.wx-p3-bubble, .wx-p3-bubble-right { position: absolute; background: #a8a8a8; color: #fff; padding: 8px 16px; border-radius: 20px; font-size: 13px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); animation: floatBubble 3s ease-in-out infinite; pointer-events: auto; min-width: 40px; min-height: 24px; cursor: text; }
.wx-p3-bubble { top: -50px; left: 60px; }
.wx-p3-bubble::after { content: ''; position: absolute; bottom: -6px; left: 20px; border-left: 6px solid transparent; border-right: 6px solid transparent; border-top: 8px solid #a8a8a8; }
.wx-p3-bubble-right { top: auto; bottom: 80px; right: 10px; background: #333; animation-delay: 1.5s; z-index: 20; }
.wx-p3-bubble-right::after { content: ''; position: absolute; bottom: -6px; right: 20px; border-left: 6px solid transparent; border-right: 6px solid transparent; border-top: 8px solid #333; }
.wx-p3-bubble:empty::before, .wx-p3-bubble-right:empty::before { content: ' talk about'; color: rgba(255,255,255,0.4); pointer-events: none; }
.wx-big-avatar-new { width: 100px; height: 100px; border-radius: 50%; border: 3px solid #fff; box-shadow: 0 0 0 1px #ddd, 0 10px 20px rgba(0,0,0,0.05); background-size: cover; background-position: center; cursor: pointer; }
.wx-small-avatar-right { position: absolute; bottom: 10px; right: 0; width: 60px; height: 60px; border-radius: 50%; border: 2px solid #fff; box-shadow: 0 4px 10px rgba(0,0,0,0.2); background-size: cover; background-position: center; cursor: pointer; z-index: 20; }
.wx-p3-info-block { margin-left: 10px; margin-bottom: 25px; }
.wx-p3-name { font-size: 20px; font-weight: bold; color: #333; margin-bottom: 8px; position: relative; display: inline-block; }
.wx-p3-name::after { content: '★'; font-size: 14px; margin-left: 5px; vertical-align: middle; }
.wx-p3-id { font-size: 14px; color: #999; margin-bottom: 12px; padding-left: 12px; border-left: 3px solid #eee; }
.wx-p3-desc { font-size: 14px; color: #555; line-height: 1.6; }
.wx-p3-tags { display: flex; flex-direction: column; gap: 10px; width: 100%; }
.wx-p3-tag { padding: 10px 15px; border-radius: 8px; background: #f9f9f9; font-size: 14px; color: #666; border-left: 4px solid #ddd; }
.wx-p3-tag.grey { background: #e0e0e0; color: #555; border-left: 4px solid #999; }
.wx-p3-footer { position: absolute; bottom: 50px; left: 0; width: 100%; font-size: 12px; color: #aaa; text-align: center; }
@keyframes floatBubble { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-5px); } }
@keyframes slideInRight { from { transform: translateX(100%); } to { transform: translateX(0); } }

/* ==========================================================================
   8. CONTACTS (通讯录)
   ========================================================================== */
#wx-page-contacts { background-color: #fff !important; flex-direction: column !important; height: 100% !important; overflow: hidden !important; padding-bottom: 0 !important; }
.im-header-top { position: relative !important; height: auto !important; padding: 65px 20px 10px 20px !important; display: flex !important; justify-content: center !important; align-items: center !important; }
.im-header-title { font-size: 17px; font-weight: 600; color: #000; margin-right: 30px; }

/* 加号按钮 */
.im-add-btn { width: 32px !important; height: 32px !important; background: #007aff !important; border-radius: 50% !important; box-shadow: 0 4px 10px rgba(0,122,255,0.3) !important; display: flex !important; justify-content: center !important; align-items: center !important; position: absolute !important; right: 20px !important; bottom: 10px !important; z-index: 99999 !important; pointer-events: auto !important; cursor: pointer !important; }
.im-add-btn svg { fill: #fff !important; width: 18px !important; height: 18px !important; pointer-events: none !important; }
.im-search-box { padding: 5px 16px 10px; }
.im-search-inner { background: #e9e9eb; height: 36px; border-radius: 10px; display: flex; align-items: center; justify-content: center; padding: 0 10px; }
.im-search-icon { width: 16px; height: 16px; fill: #8e8e93; margin-right: 6px; }
.im-search-input { border: none; background: transparent; font-size: 16px; color: #000; width: 80px; outline: none; }
.im-filter-row { display: flex; justify-content: space-between; padding: 0 20px; margin-top: 5px; }
.im-filter-item { font-size: 13px; color: #999; padding-bottom: 8px; cursor: pointer; font-weight: 500; position: relative; }
.im-filter-item.active { color: #007aff; }
.im-filter-item.active::after { content: ''; position: absolute; bottom: 0; left: 0; width: 100%; height: 2px; background: #007aff; }
.im-login-tip { background: #f9f9f9; padding: 10px 20px; font-size: 11px; color: #999; display: flex; align-items: center; gap: 6px; border-top: 1px solid #f0f0f0; }
.im-list-container { flex: 1 !important; overflow-y: auto !important; height: auto !important; padding-bottom: 120px !important; -webkit-overflow-scrolling: touch; }
.im-contact-card { display: flex; align-items: center; padding: 12px 16px; margin: 10px 16px; background: #fff; border-radius: 16px; box-shadow: 0 2px 15px rgba(0,0,0,0.03); cursor: pointer; transition: transform 0.1s; }
.im-contact-card:active { transform: scale(0.98); }
.im-c-avatar { width: 50px; height: 50px; border-radius: 50%; background-color: #f0f0f0; background-size: cover; background-position: center; margin-right: 15px; flex-shrink: 0; border: 1px solid rgba(0,0,0,0.05); }
.im-c-info { flex: 1; display: flex; flex-direction: column; justify-content: center; gap: 3px; overflow: hidden; }
.im-c-name { font-size: 16px; font-weight: 600; color: #000; }
.im-c-preview { font-size: 14px; color: #8e8e93; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

/* ==========================================================================
   9. CHAT LIST (聊天列表 - 圆润风格)
   ========================================================================== */
#wx-page-chat { background-color: #F8F9F8 !important; min-height: 100vh; }
#chat-list-container { background: transparent !important; padding: 10px 12px; display: flex; flex-direction: column; gap: 12px; }

/* 聊天分组大白卡 */
.chat-group-card { background-color: #FFFFFF !important; border-radius: 18px; overflow: hidden; box-shadow: 0 1px 5px rgba(0,0,0,0.03) !important; }
/* 单条消息容器 */
.ios-list-item { position: relative; height: 72px; background: #fff; overflow: hidden; }
/* 只有组内非最后一个有分割线 */
.ios-list-item:not(:last-child) .ili-content::after { content: ''; position: absolute; bottom: 0; right: 0; width: calc(100% - 76px); height: 1px; background-color: #f0f0f0; }
/* 滑动内容层 */
.ili-content { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: #fff; display: flex; align-items: center; padding-left: 16px; z-index: 10; transition: transform 0.2s cubic-bezier(0.2, 0.8, 0.2, 1); }
.ili-avatar { width: 48px; height: 48px; border-radius: 10px; background-color: #f0f0f0; background-size: cover; background-position: center; margin-right: 12px; flex-shrink: 0; position: relative; border: 0.5px solid rgba(0,0,0,0.05); }
.ili-badge { position: absolute; top: -4px; right: -4px; background: #ff3b30; color: #fff; font-size: 10px; padding: 2px 5px; min-width: 16px; text-align: center; border-radius: 10px; border: 2px solid #fff; }
.ili-info { flex: 1; display: flex; flex-direction: column; justify-content: center; padding-right: 16px; overflow: hidden; }
.ili-top { display: flex; justify-content: space-between; align-items: baseline; margin-bottom: 4px; }
.ili-name { font-size: 16px; font-weight: 600; color: #333; }
.ili-time { font-size: 11px; color: #b0b0b0; font-weight: 400; }
.ili-bottom { display: flex; justify-content: space-between; align-items: center; }
.ili-msg { font-size: 13px; color: #999; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 200px; }
.pin-icon { width: 14px; height: 14px; fill: #ccc; margin-left: 5px; }

/* 侧滑按钮 */
.ili-actions { position: absolute; top: 0; right: 0; height: 100%; display: flex; z-index: 1; }
.ili-btn { width: 70px; height: 100%; display: flex; justify-content: center; align-items: center; color: #fff; font-weight: 600; font-size: 15px; }
.ili-btn.pin { background-color: #E7923F; }
.ili-btn.del { background-color: #EA4E40; }

/* ==========================================================================
   10. CHAT DETAIL (聊天详情)
   ========================================================================== */
.chat-header-ios { height: 90px; background: #f2f2f7; border-bottom: 0.5px solid rgba(0,0,0,0.1); display: flex; align-items: flex-end; padding: 0 16px 12px; position: fixed; top: 0; left: 0; width: 100%; z-index: 100; }
.c-h-left { flex: 1; display: flex; align-items: center; color: #007aff; cursor: pointer; }
.c-h-left svg { width: 28px; fill: currentColor; margin-left: -8px; }
.c-h-center { display: flex; flex-direction: column; align-items: center; flex: 2; }
.c-h-name { font-weight: 600; font-size: 16px; color: #000; }
.c-h-status { font-size: 10px; color: #8e8e93; }
.c-h-right { flex: 1; display: flex; justify-content: flex-end; color: #007aff; }
.chat-body-ios { padding-top: 150px; padding-bottom: 90px; min-height: 100%; overflow-y: auto; display: flex; flex-direction: column; gap: 15px; padding-left: 10px; padding-right: 10px; }
.chat-footer-ios { position: absolute; bottom: 0; left: 0; width: 100%; background: #F5F6F5; padding: 10px 8px 30px 8px; display: flex; align-items: center; gap: 6px; border-top: 0.5px solid rgba(0,0,0,0.1); z-index: 101; transition: transform 0.3s cubic-bezier(0.2, 0.8, 0.2, 1); box-sizing: border-box; }
.chat-footer-ios.menu-open { transform: translateY(-200px); }
.cf-icon-btn { width: 32px; height: 32px; flex-shrink: 0; display: flex; justify-content: center; align-items: center; cursor: pointer; transition: transform 0.1s; }
.cf-icon-btn:active { transform: scale(0.9); }
.cf-icon-btn svg { width: 26px; height: 26px; fill: #8e8e93; }
.cf-icon-btn.custom-img-btn { width: 34px; height: 34px; background: transparent !important; border-radius: 50%; overflow: hidden; box-shadow: 0 2px 5px rgba(0,0,0,0.1); transition: transform 0.1s; flex-shrink: 0; }
.cf-icon-btn.custom-img-btn:active { transform: scale(0.9); }
.cf-icon-btn.custom-img-btn img { width: 100%; height: 100%; object-fit: cover; border-radius: 50%; display: block; }
.cf-input-wrapper { flex: 1; min-width: 0; background: #fff; border: 1px solid #ddd; border-radius: 18px; height: 36px; display: flex; align-items: center; padding: 0 8px 0 12px; position: relative; }
.cf-input-wrapper input { flex: 1; border: none; background: transparent; outline: none; font-size: 16px; color: #000; height: 100%; margin-right: 26px; min-width: 0; }
.cf-emoji-icon { position: absolute; right: 6px; top: 50%; transform: translateY(-50%); width: 24px; height: 24px; cursor: pointer; }
.cf-emoji-icon svg { width: 100%; height: 100%; fill: #8e8e93; }

/* 气泡系统 */
.msg-row { display: flex; width: 100%; margin-bottom: -12px !important; align-items: flex-start; position: relative;}
/* 有尾巴的消息，下面留多点空隙 */
.msg-row.has-tail { margin-bottom: 8px; }
/* 头像 */
.msg-avatar { width: 34px; height: 34px; border-radius: 50%; flex-shrink: 0; background-size: cover; background-position: center; box-shadow: 0 1px 2px rgba(0,0,0,0.1); margin-bottom: 0; z-index: 2; border: 0.5px solid rgba(0,0,0,0.05);    margin-top: 0px; }
/* 气泡内容通用 */
.msg-content { max-width: 68%; position: relative; padding: 6px 12px; font-size: 13px; line-height: 1.4; word-wrap: break-word; z-index: 1; border-radius: 20px !important; box-shadow: none; }
/* --- 对方的消息 --- */
.msg-row.other { justify-content: flex-start; }
.msg-row.other .msg-avatar { margin-right: 8px; }
.msg-row.other .msg-content { background: #F1F1F1; color: #000; margin-left: 2px; }
/* ★★★ 左边的小尾巴 ★★★ */
.msg-row.other.has-tail .msg-content::before { content: ""; position: absolute; z-index: 0;
    
    /* 【微调区 */
    width: 16px;   /* 你图片的宽度 */
    height: 16px;  /* 你图片的高度 */
    bottom: -8px;  /* 稍微往下一点点*/
    left: 1px;   /* 往左伸出去的距离 */
    
    /* 填入你的【左边尾巴】图片链接 */
    background-image: url('https://i.postimg.cc/SNHy52ns/wu-biao-ti111-20260101110404.png'); 
    background-size: contain; background-repeat: no-repeat; background-position: bottom right; }
/* --- 我的消息 --- */
.msg-row.me { justify-content: flex-end; }
.msg-row.me .msg-avatar { margin-left: 8px; }
.msg-row.me .msg-content { background: #565656; color: #fff; margin-right: 2px; }
/* ★★★ 右边的小尾巴 ★★★ */
.msg-row.me.has-tail .msg-content::before { content: ""; position: absolute; z-index: 0;
    
    /* 【微调区】*/
    width: 16px;  /* 你图片的宽度 */
    height: 16px; /* 你图片的高度 */
    bottom: -8px; /* 稍微往下一点点 */
    right: 1px; /* 往右伸出去的距离 */
    
    /* 填入你的【右边尾巴】图片链接 */
    background-image: url('https://i.postimg.cc/65F9S28q/wu-biao-ti111-20260101105920.png');   
    background-size: contain;  background-repeat: no-repeat; background-position: bottom left; }
/* 修复图片在气泡里的显示 */
.msg-content img {
    border-radius: 12px;
    max-width: 100%;
    display: block;}
/* 消息上升动画 */
@keyframes msgSlideUpIn {
    from { opacity: 0; transform: translateY(30px) scale(0.98); }
    to { opacity: 1; transform: translateY(0) scale(1); }
}
.msg-row.new-msg-anim { animation: msgSlideUpIn 0.35s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards; opacity: 0; }
#chat-msg-area { scroll-behavior: smooth; }
/* 正在输入 */
.typing-row { display: flex; align-items: flex-end; margin-bottom: 10px; padding-left: 4px; animation: slideUpFade 0.3s ease-out; }
.typing-bubble { background-color: #F1F1F1; padding: 10px 18px; border-radius: 20px; display: flex; align-items: center; gap: 5px; height: 40px; width: fit-content; position: relative; margin-left: 20px; border-bottom-left-radius: 20px; }
.typing-bubble::before { content: ""; position: absolute; z-index: 0; bottom: 0px; left: -4px; width: 20px; height: 20px; border-radius: 50%; background-color: #F1F1F1; }
.typing-bubble::after { content: ""; position: absolute; z-index: 0; bottom: -3px; left: -15px; width: 10px; height: 10px; border-radius: 50%; background-color: #F1F1F1; }
.typing-dot { width: 9px; height: 9px; background-color: #8e8e93; border-radius: 50%; opacity: 0.6; animation: typingBounce 1.4s infinite ease-in-out both; }
.typing-dot:nth-child(1) { animation-delay: -0.32s; }
.typing-dot:nth-child(2) { animation-delay: -0.16s; }
.typing-dot:nth-child(3) { animation-delay: 0s; }
@keyframes typingBounce {
    0%, 80%, 100% { transform: scale(0.6); opacity: 0.5; } 
    40% { transform: scale(1); opacity: 1; } 
}
.chat-action-sheet { height: 200px; padding-bottom: 30px; }

/* ==================== iOS WeChat==================== */
.chat-plus-menu { position: fixed; bottom: 0; left: 0; width: 100%; height: 280px; background: #F6F6F6; z-index: 100; transform: translateY(100%); pointer-events: none; visibility: hidden; transition: transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94), visibility 0.3s;}
/* 激活状态 */
body.menu-open .chat-plus-menu { transform: translateY(0); pointer-events: auto; visibility: visible;}
body.menu-open .chat-footer-ios { transform: translateY(-280px) !important; }
#chat-msg-area { transition: transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94), padding-bottom 0.3s; position: relative; z-index: 0; }
body.menu-open #chat-msg-area { padding-bottom: 380px !important; transform: translateY(-280px); }
/* 滚动区域 */
.plus-scroll-wrapper { flex: 1; display: flex; overflow-x: auto; scroll-snap-type: x mandatory; -webkit-overflow-scrolling: touch; scrollbar-width: none; }
.plus-scroll-wrapper::-webkit-scrollbar { display: none; }
/* 每一页布局 */
.plus-page { min-width: 100%; padding: 25px 20px 10px 20px; display: grid; grid-template-columns: repeat(4, 1fr); grid-template-rows: repeat(2, auto); gap: 20px 0; scroll-snap-align: start; }
/* 图标样式 */
.plus-item { display: flex; flex-direction: column; align-items: center; gap: 8px; cursor: pointer; }
.plus-item:active { opacity: 0.6; }
.plus-icon-box { width: 60px; height: 60px; background: #fff; border-radius: 16px; display: flex; justify-content: center; align-items: center; }
.plus-icon-box svg { width: 30px; height: 30px; fill: #333; }
.plus-label { font-size: 12px; color: #666; }
/* 分页点 */
.plus-pagination { height: 30px; display: flex; justify-content: center; align-items: center; gap: 8px; }
.plus-dot { width: 6px; height: 6px; background: #D8D8D8; border-radius: 50%; transition: background 0.2s; }
.plus-dot.active { background: #7B7B7B; }
.msg-pop-menu { position: fixed; background: rgba(0, 0, 0, 0.85); backdrop-filter: blur(10px); border-radius: 12px; padding: 0; display: none; flex-wrap: wrap; z-index: 2100; box-shadow: 0 10px 25px rgba(0,0,0,0.3); animation: menuPop 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275); max-width: 280px; transform-origin: center bottom; }
.mpm-row { display: flex; align-items: center; width: 100%; justify-content: space-between; padding: 2px; }
.mpm-item { padding: 10px 14px; color: #fff; font-size: 13px; font-weight: 500; cursor: pointer; text-align: center; border-right: 0.5px solid rgba(255,255,255,0.2); flex: 1; white-space: nowrap; }
.mpm-item:last-child { border-right: none; }
.mpm-item:active { background: rgba(255,255,255,0.15); border-radius: 8px; }
.mpm-arrow { position: absolute; width: 0; height: 0; border-left: 8px solid transparent; border-right: 8px solid transparent; border-top: 8px solid rgba(0, 0, 0, 0.85); bottom: -8px; left: 50%; transform: translateX(-50%); }
.mpm-arrow.up { bottom: auto; top: -8px; border-top: none; border-bottom: 8px solid rgba(0, 0, 0, 0.85); }
@keyframes menuPop { from { opacity: 0; transform: scale(0.8); } to { opacity: 1; transform: scale(1); } }
.msg-container-col { display: flex; flex-direction: column; max-width: 72%; }
.me .msg-container-col { align-items: flex-end; }
.other .msg-container-col { align-items: flex-start; }
.msg-container-col .msg-content { max-width: 100%; margin-bottom: 4px; }
.msg-quote-outside { background: #F2F2F2; border-radius: 6px; padding: 4px 8px; font-size: 11px; color: #666; position: relative; cursor: pointer; margin-top: 3px; margin-bottom: 2px; display: inline-block; max-width: 100%; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; border-left: 2px solid #D1D1D1; line-height: 1.3; }
.msg-quote-outside .quote-outside-name, .msg-quote-outside .quote-outside-text { display: inline; margin: 0; }
.msg-status-foot { width: 100%; font-size: 11px; color: #8e8e93; font-weight: 500; margin-top: 5px; margin-bottom: 20px; clear: both; display: block; opacity: 1 !important; animation: none; }
.msg-recall-pill { align-self: center; font-size: 12px; color: #999; background: rgba(0, 0, 0, 0.05); padding: 4px 10px; border-radius: 4px; margin: 10px 0; text-align: center; }
.recall-link { color: #007aff; margin-left: 5px; cursor: pointer; font-weight: 500; }
.msg-time-pill {
    align-self: center; font-size: 11px; color: #fff;
    background: rgba(0,0,0,0.2); padding: 4px 8px;
    border-radius: 12px; margin: 15px 0 5px 0; font-weight: 500;
}
.chat-header-layer { position: fixed; top: 0; left: 0; width: 100%; height: 120px; z-index: 100; background-color: #F5F6F5; background-size: cover; background-position: center; box-shadow: 0 4px 20px rgba(0,0,0,0.02); transition: all 0.3s ease; padding-top: 48px; box-sizing: border-box; }
.chl-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(to bottom, rgba(255,255,255,0.9), rgba(255,255,255,0.7)); backdrop-filter: blur(5px); -webkit-backdrop-filter: blur(5px); z-index: 1; }
.chat-header-layer[style*="url"] .chl-overlay { background: linear-gradient(to bottom, rgba(255,255,255,0.8), rgba(255,255,255,0.4)); }
.chl-content { position: relative; z-index: 2; display: flex; justify-content: space-between; align-items: flex-end; height: 100%; padding: 0 20px 20px 10px; }
.chl-left-group { display: flex; align-items: center; gap: 8px; }
.chl-back-btn { width: 30px; height: 30px; display: flex; justify-content: center; align-items: center; cursor: pointer; color: #333; }
.chl-back-btn svg { width: 28px; height: 28px; fill: currentColor; }
.chl-avatar-box { padding: 2px; background: rgba(255,255,255,0.5); border-radius: 14px; margin-right: 6px; }
.chl-avatar { width: 44px; height: 44px; border-radius: 12px; background-color: #ddd; background-size: cover; background-position: center; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
.chl-text-info { display: flex; flex-direction: column; justify-content: center; }
.chl-name { font-size: 18px; font-weight: 700; color: #333; line-height: 1.2; text-shadow: 0 1px 1px rgba(255,255,255,0.8); }
.chl-status { font-size: 11px; color: #666; font-weight: 500; margin-top: 2px; opacity: 0.8; }
.chl-right-group { display: flex; align-items: center; padding-bottom: 5px; }
.chl-menu-btn { width: 36px; height: 36px; background: rgba(255,255,255,0.6); border-radius: 10px; display: flex; justify-content: center; align-items: center; cursor: pointer; transition: transform 0.1s; border: 1px solid rgba(0,0,0,0.05); }
.chl-menu-btn:active { transform: scale(0.9); background: #fff; }
.chl-menu-btn svg { width: 22px; height: 22px; fill: #333; }
.chl-avatar-wrapper { position: relative; width: 54px; height: 54px; margin-right: 12px; display: flex; justify-content: center; align-items: center; }
.chl-avatar { width: 40px; height: 40px; border-radius: 50%; background-color: #ddd; background-size: cover; background-position: center; position: relative; z-index: 1; border: 2px solid #fff; }
.chl-frame {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    z-index: 2;
    pointer-events: auto;
    transform: scale(0.95) translateY(-3px);    
    transform-origin: center center;
}
.chl-bubble { position: absolute; top: -22px; right: -25px; background: #fff; padding: 4px 10px; border-radius: 12px; font-size: 11px; color: #555; box-shadow: 0 4px 10px rgba(0,0,0,0.1); z-index: 3; white-space: nowrap; animation: floatBubble 3s ease-in-out infinite; border: 1px solid rgba(0,0,0,0.05); }
.chl-bubble::after { content: ''; position: absolute; bottom: -4px; left: 10px; width: 8px; height: 8px; background: #fff; transform: rotate(45deg); border-bottom: 1px solid rgba(0,0,0,0.05); border-right: 1px solid rgba(0,0,0,0.05); }
.chl-online-dot { position: absolute; bottom: 2px; right: 2px; width: 10px; height: 10px; background: #34c759; border-radius: 50%; border: 2px solid #fff; z-index: 3; box-shadow: 0 0 5px rgba(52, 199, 89, 0.5); animation: breathe 2s infinite ease-in-out; }
.chl-tag { font-size: 9px; padding: 2px 6px; border-radius: 6px; font-weight: 600; text-transform: uppercase; cursor: text; }
@keyframes floatBubble {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-4px); }
}
@keyframes breathe {
    0%, 100% { transform: scale(1); opacity: 1; }
    50% { transform: scale(0.9); opacity: 0.8; }
}
.chl-status { font-size: 12px; color: #888; margin-top: 4px; max-width: 160px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.frame-lib-item { position: relative; width: 100%; height: 19vw; background: #fff; border-radius: 16px; border: 1px solid #f0f0f0; cursor: pointer; overflow: hidden; display: flex; justify-content: center; align-items: center;padding: 10px;      box-shadow: 0 4px 12px rgba(0,0,0,0.03); transition: all 0.2s; }
.frame-lib-item:active { transform: scale(0.95); }
/* 选中状态 */
.frame-lib-item.selected {
    border-color: #007aff;
    background: #f0f8ff; }
.preview-face { position: absolute; top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);    
    width: 60%; 
    height: 60%; 
    background-color: #e0e0e0;
    border-radius: 50%;
    z-index: 1;
}

/* 框框图片 (保持不变) */
.frame-lib-img {
    position: relative; z-index: 2;
    width: 100%; height: 100%;
    object-fit: contain;
    pointer-events: none;
}
.chl-status-pill {
    background: rgba(255, 255, 255, 0.6);
    padding: 2px 8px;
    border-radius: 12px;
    font-size: 10px;
    color: #555;
    display: flex;
    align-items: center;
    gap: 4px;
    margin-top: 4px;
    border: 0.5px solid rgba(0,0,0,0.05);
    animation: breath 3s infinite ease-in-out;
}
@keyframes breath { 0%, 100% { opacity: 0.8; transform: scale(1); } 50% { opacity: 1; transform: scale(1.05); } }
/* ==========================================================================
   11. CHARACTER CREATOR (角色编辑）
   ========================================================================== */
/* 1. 根容器：增加动画属性 */
#sub-page-creator, .exp-theme-root { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: #fff; z-index: 99999 !important; display: none; transform: translateY(100%); opacity: 0; transition: transform 0.35s cubic-bezier(0.32, 0.72, 0, 1), opacity 0.3s ease; display: flex; flex-direction: column; overflow: hidden; }
#sub-page-creator.active, .exp-theme-root.active { transform: translateY(0); opacity: 1; }
.exp-browser-top { background: #e0e0e0; padding-top: 50px; flex-shrink: 0; }
.exp-tab-bar { display: flex; align-items: flex-end; padding: 0 10px; height: 36px; background: #dee1e6; position: relative; }
.exp-tab { background: #fff; border-radius: 8px 8px 0 0; padding: 6px 15px; display: flex; align-items: center; gap: 8px; font-size: 12px; font-weight: 500; color: #333; box-shadow: 0 -2px 5px rgba(0,0,0,0.05); margin-right: 5px; position: relative; z-index: 2; }
.exp-tab.active::after { content: ''; position: absolute; bottom: -4px; left: 0; right: 0; height: 4px; background: #fff; }
.exp-icon { font-size: 14px; }
.exp-close { margin-left: 10px; font-size: 14px; color: #999; cursor: pointer; }
.exp-close:hover { color: #000; }
.exp-win-ctrls { margin-left: auto; display: flex; gap: 15px; font-size: 12px; color: #666; padding-bottom: 8px; }
.exp-tool-bar { background: #fff; padding: 8px 15px; display: flex; align-items: center; gap: 15px; border-bottom: 1px solid #eee; }
.exp-tool-left { display: flex; align-items: center; gap: 8px; font-size: 12px; font-weight: 700; color: #555; }
.exp-grid-icon { font-size: 16px; }
.exp-url-box { flex: 1; background: #f1f2f5; border-radius: 4px; display: flex; align-items: center; padding: 0 8px; height: 30px; margin: 0 10px; transition: background 0.2s; }
.exp-url-box:focus-within { background: #fff; border: 1px solid #007aff; box-shadow: 0 0 0 2px rgba(0,122,255,0.1); }
.exp-search-input { flex: 1; border: none; outline: none; background: transparent; font-size: 12px; color: #333; font-family: inherit; margin-left: 5px; width: 100%; }
.exp-search-input::placeholder { color: #ccc; }
.exp-search-icon { font-size: 12px; color: #999; opacity: 0.8; }
.exp-search-icon { color: #999; margin-right: 6px; font-size: 14px; }
.exp-url-text { overflow: hidden; white-space: nowrap; text-overflow: ellipsis; max-width: 150px; }
.exp-tool-right { display: flex; gap: 12px; }
.exp-btn { font-size: 16px; cursor: pointer; color: #555; }
.exp-btn.save-btn { color: #000; } 
.exp-content-scroll { flex: 1; overflow-y: auto; padding: 30px 25px; background: #fff; }
.exp-header-layout { display: flex; gap: 20px; margin-bottom: 40px; }
.exp-avatar-area { flex-shrink: 0; }
.exp-avatar-circle { width: 100px; height: 100px; border-radius: 50%; background: #f0f0f0; overflow: hidden; background-size: cover; background-position: center; display: flex; justify-content: center; align-items: center; cursor: pointer; filter: grayscale(20%); }
.exp-avatar-tip { font-size: 10px; color: #aaa; text-align: center; line-height: 1.2; }
.exp-avatar-circle[style*="url"] .exp-avatar-tip { display: none; }
.exp-info-area { flex: 1; display: flex; flex-direction: column; justify-content: center; }
.exp-info-title { font-size: 10px; font-weight: bold; color: #666; margin-bottom: 2px; letter-spacing: 0.5px; }
.exp-info-subtitle { font-size: 8px; color: #ccc; margin-bottom: 15px; line-height: 1.2; }
.exp-input-line { display: flex; align-items: center; border-bottom: 1px solid #eee; padding-bottom: 4px; margin-bottom: 12px; }
.exp-prefix { font-weight: bold; font-size: 14px; margin-right: 8px; color: #000; }
.exp-suffix { font-size: 10px; color: #ddd; margin-left: 8px; font-weight: bold; }
.exp-input { border: none; outline: none; background: transparent; flex: 1; font-size: 14px; font-weight: 600; color: #000; }
.exp-input::placeholder { color: #eee; font-weight: 400; }
.exp-body-section { margin-top: 10px; }
.exp-sec-header { display: flex; align-items: center; margin-bottom: 15px; }
.exp-sec-icon { font-size: 14px; margin-right: 8px; color: #666; }
.exp-sec-title { font-size: 14px; font-weight: 500; color: #333; }
.exp-pill-btn { margin-left: auto; background: #f5f5f5; padding: 2px 10px; border-radius: 12px; font-size: 10px; color: #333; font-weight: bold; }
.exp-text-block { font-size: 12px; color: #333; line-height: 1.8; }
.exp-text-row { display: flex; align-items: center; flex-wrap: wrap; margin-bottom: 8px; }
.exp-bold { font-weight: bold; margin-right: 6px; }
.exp-inline-input { border: none; border-bottom: 1px dashed #ddd; outline: none; font-size: 12px; color: #555; background: transparent; width: 120px; padding: 0 4px; }
.exp-inline-input.small { width: 40px; text-align: center; }
.exp-slash { margin: 0 6px; color: #ddd; }
.exp-divider { margin: 0 10px; color: #eee; }
.exp-label-small { color: #999; margin-right: 2px; }
.exp-text-area-wrapper { margin-top: 15px; }
.exp-row-label { font-weight: 600; margin-bottom: 6px; color: #333; }
.exp-textarea { width: 100%; border: 1px solid #f5f5f5; background: #fafafa; border-radius: 4px; padding: 8px; font-size: 12px; line-height: 1.6; color: #555; outline: none; resize: none; font-family: inherit; }
.exp-footer-deco { margin-top: 15px; font-size: 10px; color: #bbb; word-spacing: 5px; font-weight: 600; }

/* ==========================================================================
   12. SETTINGS & API (设置与API)
   ========================================================================== */
.settings-ui { background: #f2f2f7; height: 100%; display: flex; flex-direction: column; }
.settings-header-area { padding: 50px 16px 10px 16px !important; background: #f2f2f7; display: flex; flex-direction: column; gap: 8px; }
.settings-big-title { font-size: 34px; font-weight: 700; color: #000; margin-bottom: 5px; margin-left: 4px; line-height: 1.2; }
.settings-search-bar { background: #e3e3e8; height: 38px; border-radius: 10px; display: flex; align-items: center; padding: 0 10px; color: #8e8e93; font-size: 17px; width: 100%; box-sizing: border-box; }
.s-search-icon { width: 18px; height: 18px; fill: #8e8e93; flex-shrink: 0; }
.s-mic-icon { width: 18px; height: 18px; fill: #8e8e93; flex-shrink: 0; opacity: 0.7; }
.s-search-placeholder { flex: 1; margin-left: 8px; text-align: left; font-size: 17px; line-height: normal; }
.settings-list { padding: 0 16px; flex: 1; overflow-y: auto; padding-bottom: 40px; }
.settings-list .profile-avatar { width: 60px; height: 60px; border-radius: 50%; background-color: #ddd; background-size: cover; background-position: center; flex-shrink: 0; border: 1px solid rgba(0,0,0,0.1); }
.s-group { background: #fff; border-radius: 10px; overflow: hidden; margin-bottom: 18px; }
.s-item { padding: 0 16px; display: flex; justify-content: space-between; align-items: center; height: 48px; cursor: pointer; font-size: 16px; position: relative; }
.s-item:not(:last-child)::after { content: ''; position: absolute; bottom: 0; left: 56px; right: 0; height: 1px; background: #c6c6c8; transform: scaleY(0.5); }
.s-item:active { background: #e5e5ea; }
.profile-item { height: 80px !important; }
.profile-item::after { left: 16px !important; }
.profile-info { display: flex; flex-direction: column; gap: 2px; }
.profile-desc { font-size: 12px; color: #666; }
.s-left { display: flex; align-items: center; gap: 14px; }
.ios-icon-img { width: 29px; height: 29px; border-radius: 6px; object-fit: cover; }
.ios-icon-bg { width: 29px; height: 29px; border-radius: 6px; display: flex; justify-content: center; align-items: center; color: #fff; }
.ios-icon-svg { width: 18px; height: 18px; fill: currentColor; }
.s-right { display: flex; align-items: center; gap: 6px; }
.s-status { font-size: 15px; color: #8e8e93; }
.s-arrow { color: #c4c4c7; font-size: 22px; font-weight: 500; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; margin-top: -3px; transform: scaleY(1.1); margin-left: auto; padding-left: 10px; }
.ios-switch { position: relative; display: inline-block; width: 51px; height: 31px; }
.ios-switch input { opacity: 0; width: 0; height: 0; }
.slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #e9e9ea; transition: .4s; border-radius: 34px; }
.slider:before { position: absolute; content: ""; height: 27px; width: 27px; left: 2px; bottom: 2px; background-color: white; transition: .4s; border-radius: 50%; box-shadow: 0 2px 4px rgba(0,0,0,0.2); }
input:checked + .slider { background-color: #34c759; }
input:checked + .slider:before { transform: translateX(20px); }
.bg-blue { background-color: #007aff; }
.bg-teal { background-color: #5ac8fa; }
.bg-gray { background-color: #8e8e93; }
.bg-orange { background-color: #ff9500; }
.bg-green { background-color: #34c759; }

/* API 设置专属 */
.api-section-header { padding: 20px 16px 8px; font-size: 13px; color: #888; text-transform: uppercase; letter-spacing: 0.5px; }
.api-mode-group { background: #fff; margin: 0 16px; border-radius: 10px; overflow: hidden; display: flex; padding: 2px; background: #e9e9eb; }
.api-mode-btn { flex: 1; text-align: center; padding: 8px 0; font-size: 14px; border-radius: 8px; color: #000; cursor: pointer; transition: all 0.2s; }
.api-mode-btn.active { background: #fff; box-shadow: 0 2px 5px rgba(0,0,0,0.1); font-weight: 600; }
.ios-form-group { background: #fff; border-radius: 10px; overflow: hidden; margin: 0 16px; }
.ios-input-row { min-height: 50px; display: flex; align-items: center; padding: 8px 16px; border-bottom: 0.5px solid #e5e5ea; }
.ios-input-row label { min-width: 90px; font-weight: 600; white-space: nowrap; }
.ios-input-row input { width: 100%; border: none; font-size: 16px; outline: none; background: #e5e5ea; border-radius: 8px; padding: 6px 10px; height: 36px; margin-left: 10px; color: #000; }
.api-decorative-header { margin: 10px 16px 5px; font-size: 14px; font-weight: 700; color: #aaa; display: flex; justify-content: space-between; }
.api-decorative-header span { font-weight: normal; font-size: 12px; letter-spacing: 1px; }
.api-btn-row { display: flex; gap: 10px; padding: 10px 16px; }
.api-small-btn { padding: 6px 12px; border-radius: 6px; font-size: 12px; font-weight: 600; color: #fff; cursor: pointer; }
.api-small-btn.dark { background: #666; }
.api-small-btn.red { background: #ff6b6b; }
.api-range-slider { -webkit-appearance: none; width: 100%; height: 4px; background: #ddd; border-radius: 2px; outline: none; }
.api-range-slider::-webkit-slider-thumb { -webkit-appearance: none; width: 20px; height: 20px; background: #fff; border: 2px solid #333; border-radius: 50%; cursor: pointer; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }

/* ==================== 
   Ins Style Backup Page 
   ==================== */
.ins-card {
    background: #fff;
    border-radius: 24px;
    padding: 20px;
    display: flex;
    align-items: center;
    margin-bottom: 20px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.06);
    cursor: pointer;
    transition: transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
    position: relative;
    overflow: hidden;
}

.ins-card:active {
    transform: scale(0.96);
}

/* 装饰性光泽 */
.ins-card::after {
    content: '';
    position: absolute;
    top: -50%; left: -50%;
    width: 200%; height: 200%;
    background: radial-gradient(circle, rgba(255,255,255,0.8) 0%, rgba(255,255,255,0) 60%);
    opacity: 0;
    transition: opacity 0.3s;
    pointer-events: none;
}

.ins-card-icon-bg {
    width: 56px;
    height: 56px;
    background: #FFF0F5; /* 默认淡粉 */
    color: #FF69B4;
    border-radius: 18px;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-shrink: 0;
    margin-right: 18px;
}

.ins-card-icon-bg svg {
    width: 28px;
    height: 28px;
    fill: currentColor;
}

.ins-card-info {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
}

.ins-card-title {
    font-size: 17px;
    font-weight: 700;
    color: #333;
    margin-bottom: 4px;
}

.ins-card-desc {
    font-size: 12px;
    color: #999;
    line-height: 1.4;
}

.ins-card-arrow {
    width: 30px;
    height: 30px;
    background: #F5F5F5;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 14px;
    font-weight: bold;
    color: #FF69B4;
}

/* ==========================================================================
   13. ALERTS & OVERLAYS (弹窗系统 - iOS Q弹丝滑版)
   ========================================================================== */
.custom-alert-overlay { position: fixed !important; top: 0; left: 0; right: 0; bottom: 0; width: 100vw !important; height: 100vh !important; background: rgba(0, 0, 0, 0); z-index: 99999 !important; display: none; justify-content: center; align-items: center; animation: fadeOverlayIn 0.3s cubic-bezier(0.25, 0.1, 0.25, 1) forwards; }
.custom-alert-overlay.closing-anim { animation: fadeOverlayOut 0.2s ease-in forwards; pointer-events: none;}
#delete-alert-overlay { z-index: 100002 !important; }
.custom-alert-box { width: 280px; background: rgba(255, 255, 255, 0.88); backdrop-filter: blur(25px); -webkit-backdrop-filter: blur(25px); border-radius: 20px; padding: 25px 20px; display: flex; flex-direction: column; align-items: center; box-shadow: 0 10px 40px rgba(0,0,0,0.15); opacity: 1; transform: scale(1); animation: iosSpring 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }

/* 退场时的盒子动画 */
.custom-alert-overlay.closing-anim .custom-alert-box { animation: iosZoomOut 0.15s ease-in forwards; }
.alert-title { font-size: 19px; font-weight: 700; color: #000; margin-bottom: 8px; text-align: center; }
.alert-msg { font-size: 14px; color: #666; text-align: center; line-height: 1.5; margin-bottom: 25px; width: 100%; word-wrap: break-word; }
.alert-btn-group { display: flex; gap: 12px; width: 100%; justify-content: center; }
/* 竖向排列的按钮组 (如 Start Where) */
.alert-btn-group[style*="column"] { gap: 10px; }
.alert-btn { flex: 1; padding: 12px 0; border-radius: 12px; font-size: 16px; font-weight: 600; text-align: center; cursor: pointer; background: rgba(0,0,0,0.05); color: #999999; transition: all 0.1s; position: relative; overflow: hidden;
}
.alert-btn:active { transform: scale(0.97); opacity: 0.8; }

/* 颜色变种 - 调整为更协调的色调 */
.alert-btn.confirm { background: #007aff; color: #999999; box-shadow: 0 2px 8px rgba(0,122,255,0.25); }
.alert-btn.cancel { background: #E5E5EA; color: #000; font-weight: 500; }
.alert-btn[style*="background:#34c759"] { background: #34C759 !important; box-shadow: 0 2px 8px rgba(52,199,89,0.25); } 
.alert-btn[style*="background: #ff3b30"] { background: #FF3B30 !important; box-shadow: 0 2px 8px rgba(255,59,48,0.25); }
.alert-btn.confirm { background: #007aff; color: #fff !important; }
.alert-btn.cancel { background: #e5e5ea; color: #999999 !important; }
.delete-btn { color: #ff3b30 !important; margin-left: 10px; cursor: pointer; }

/* 关键帧动画 */
@keyframes iosSpring { 
    0% { transform: scale(0.9); opacity: 0; } 
    60% { transform: scale(1.05); opacity: 1; } 
    100% { transform: scale(1); opacity: 1; } 
}
@keyframes iosZoomOut { 
    0% { transform: scale(1); opacity: 1; } 
    100% { transform: scale(0.9); opacity: 0; } 
}
@keyframes fadeOverlayIn { from { background: rgba(0,0,0,0); } to { background: rgba(0,0,0,0.4); } }
@keyframes fadeOverlayOut { from { background: rgba(0,0,0,0.4); } to { background: rgba(0,0,0,0); } }

/* ==========================================================================
   14. SODA MUSIC (汽水音乐)
   ========================================================================== */
.music-ui { background: var(--soda-dark); color: #fff; height: 100%; display: flex; flex-direction: column; position: relative; overflow: hidden; }
.soda-bg-blur { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(180deg, rgba(30,30,30,0.8), #000); z-index: 0; filter: blur(40px); opacity: 0.6; }
.soda-top-bar { position: relative; z-index: 10; height: 44px; margin-top: 50px; display: flex; justify-content: center; align-items: center; gap: 20px; font-size: 16px; font-weight: 600; color: rgba(255,255,255,0.5); }
.soda-tab.active { color: #fff; position: relative; }
.soda-tab.active::after { content: ''; position: absolute; bottom: -6px; left: 50%; transform: translateX(-50%); width: 16px; height: 3px; background: var(--soda-yellow); border-radius: 2px; }
.soda-main-content { flex: 1; position: relative; z-index: 10; display: flex; flex-direction: column; justify-content: center; align-items: center; width: 100%; }
.soda-album-cover { width: 300px; height: 300px; background: #333; border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.3); background-size: cover; background-position: center; position: relative; }
.soda-side-actions { position: absolute; right: 15px; bottom: 20px; display: flex; flex-direction: column; gap: 25px; align-items: center; }
.soda-bottom-area { position: relative; z-index: 10; padding: 0 20px 40px; background: linear-gradient(to top, #000 10%, transparent); }
.soda-info { margin-bottom: 20px; width: 75%; }
.soda-title { font-size: 20px; font-weight: bold; margin-bottom: 6px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.soda-artist { font-size: 14px; color: rgba(255,255,255,0.7); display: flex; align-items: center; gap: 5px; }
.soda-tag { font-size: 10px; background: rgba(255,255,255,0.15); padding: 1px 4px; border-radius: 3px; color: var(--soda-yellow); }
.soda-progress-container { height: 20px; display: flex; align-items: center; gap: 10px; font-size: 10px; color: #888; }
.soda-progress-bg { flex: 1; height: 3px; background: rgba(255,255,255,0.15); border-radius: 2px; position: relative; }
.soda-progress-fill { width: 30%; height: 100%; background: var(--soda-yellow); border-radius: 2px; position: absolute; }
.soda-progress-thumb { width: 10px; height: 10px; background: #fff; border-radius: 50%; position: absolute; right: -5px; top: -3.5px; }
.soda-controls { display: flex; justify-content: space-between; align-items: center; margin-top: 10px; padding: 0 10px; }
.sc-btn { width: 24px; height: 24px; fill: #fff; opacity: 0.8; cursor: pointer; }
.sc-play-btn { width: 60px; height: 60px; background: #fff; border-radius: 50%; display: flex; justify-content: center; align-items: center; cursor: pointer; }
.sc-play-icon { width: 24px; height: 24px; fill: #000; margin-left: 2px; }
.sc-pause-icon { width: 24px; height: 24px; fill: #000; display: none; }
.sc-play-btn.playing .sc-play-icon { display: none; }
.sc-play-btn.playing .sc-pause-icon { display: block; }
/* ==========================================================================
   15. NEW DESKTOP SWIPER (三页桌面系统)
   ========================================================================== */
/* 桌面容器 */
.desktop-wrapper {
    width: 100%; height: 100%; display: flex;
    overflow-x: auto; overflow-y: hidden;
    scroll-snap-type: x mandatory; scrollbar-width: none;
    -webkit-overflow-scrolling: touch;
}
.desktop-wrapper::-webkit-scrollbar { display: none; }

/* 页面布局 */
.desktop-page {
    min-width: 100%; height: 100%; scroll-snap-align: start;
    padding: 60px 20px 150px 20px;
    overflow-y: auto; display: flex; flex-direction: column; align-items: center;
}

/* 底部控制区 */
.desktop-footer-controls {
    position: absolute; bottom: 130px; left: 0; width: 100%;
    display: flex; flex-direction: column; align-items: center;
    gap: 12px; z-index: 80; pointer-events: none;
}
.desktop-footer-controls .search-pill {
    pointer-events: auto; background: rgba(255, 255, 255, 0.6); margin: 0;
}
.desktop-pagination { display: flex; gap: 8px; pointer-events: auto; }
.d-dot {
    width: 7px; height: 7px; background: rgba(0,0,0,0.2);
    border-radius: 50%; transition: all 0.3s;
}
.d-dot.active { background: #fff; box-shadow: 0 1px 3px rgba(0,0,0,0.2); }
/* 日历组件 */
.calendar-widget {
    background: #FFFFFF; width: 100%; border-radius: 20px;
    padding: 13px 18px; display: flex; flex-direction: column; gap: 15px;
}
.cal-header { display: flex; justify-content: space-between; align-items: flex-start; }
.cal-date-big {
    font-size: 42px; font-family: 'Times New Roman', serif;
    color: #343434; line-height: 1; letter-spacing: -1px; }
.cal-day-text { font-size: 14px; color: #151515; margin-top: 4px; margin-left: 2px; font-weight: 500; }
.cal-text-area { display: flex; flex-direction: column; align-items: flex-end; max-width: 60%; }
.cal-sub-text { font-size: 11px; margin-bottom: 2px; }
.cal-main-text { font-size: 12px; color: #444; font-weight: 500; line-height: 1.4; }
.cal-photo-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 5px; height: 220px; }
.cal-photo-item { background-color: #e0e0e0; border-radius: 23px; position: relative; overflow: hidden; cursor: pointer; background-size: cover; background-position: center; transition: transform 0.1s; border: 1px solid transparent; }
.cal-photo-item:active { transform: scale(0.96); border: 2px dashed #F1F1F1; }
.wave-box { position: absolute; bottom: 8px; left: 50%; transform: translateX(-50%); display: flex; gap: 3px; align-items: center; height: 20px; padding: 0 12px; background: rgba(60, 60, 60, 0.5); backdrop-filter: blur(5px); border-radius: 12px; border: 1px solid rgba(255, 255, 255, 0.1); }
.wave-bar { width: 3px; background: rgba(255,255,255,0.8); border-radius: 2px; animation: waveJump 1s infinite ease-in-out; }
.wave-bar:nth-child(1) { height: 6px; animation-delay: 0s; }
.wave-bar:nth-child(2) { height: 10px; animation-delay: 0.2s; }
.wave-bar:nth-child(3) { height: 5px; animation-delay: 0.4s; }
@keyframes waveJump {
    0%, 100% { height: 4px; } 50% { height: 12px; }
}

/* ==================== 
   16.朋友圈 (Moments/Discover) 全新样式 
   ==================== */
.ins-layout {
    display: block !important; /* 强制显示 */
    background: #fff;
    height: 100%;
    overflow-y: auto;
    padding-top: 50px; /* 避开状态栏 */
    padding-bottom: 90px;
}

/* 1. 头部区域 */
.ins-header-section {
    display: flex;
    flex-direction: column;
    align-items: center; /* 居中对齐 */
    padding: 20px 20px 10px 20px;
}

.ins-avatar-container {
    position: relative;
    margin-bottom: 15px;
}

/* 那个居中的喊话气泡 */
.ins-mood-bubble {
    position: absolute;
    top: -35px; /* 往上飘 */
    left: 50%;
    transform: translateX(-50%); /* 完美水平居中 */
    background: #fff;
    padding: 6px 14px;
    border-radius: 20px;
    font-size: 13px;
    color: #333;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    white-space: nowrap;
    border: 0.5px solid rgba(0,0,0,0.05);
    z-index: 5;
    animation: floatBubble 3s ease-in-out infinite;
}
/* 气泡的小尖角 */
.ins-mood-bubble::after {
    content: '';
    position: absolute;
    bottom: -5px;
    left: 50%;
    transform: translateX(-50%) rotate(45deg);
    width: 10px; height: 10px;
    background: #fff;
    border-bottom: 0.5px solid rgba(0,0,0,0.05);
    border-right: 0.5px solid rgba(0,0,0,0.05);
}

/* 那个大头像 */
.ins-big-avatar {
    width: 86px;
    height: 86px;
    border-radius: 50%;
    background-color: #f0f0f0;
    background-size: cover;
    background-position: center;
    border: 1px solid rgba(0,0,0,0.1);
}

/* 名字和简介 */
.ins-info { text-align: center; margin-bottom: 15px; }
.ins-name { font-size: 18px; font-weight: 700; color: #000; margin-bottom: 4px; }
.ins-bio { font-size: 13px; color: #333; line-height: 1.4; }

/* 数据栏 */
.ins-stats {
    display: flex; gap: 40px; text-align: center; margin-bottom: 20px;
}
.ins-stat-item b { font-size: 16px; color: #000; }
.ins-stat-item span { font-size: 12px; color: #666; }

/* 按钮组 */
.ins-btn-row { display: flex; gap: 8px; width: 100%; justify-content: center; margin-bottom: 10px; }
.ins-btn {
    background: #f0f0f0; padding: 8px 16px; border-radius: 8px;
    font-size: 13px; font-weight: 600; color: #000; cursor: pointer;
}
.ins-btn.primary { background: #f0f0f0; flex: 1; max-width: 120px; text-align: center; }
.ins-btn.icon-btn { padding: 8px 10px; }

/* 2. 横向滚动高光区 */
.ins-highlights-scroll {
    display: flex;
    overflow-x: auto;
    padding: 10px 15px;
    gap: 15px;
    scrollbar-width: none; /* 隐藏滚动条 */
}
.ins-highlights-scroll::-webkit-scrollbar { display: none; }

.ins-highlight-item {
    display: flex; flex-direction: column; align-items: center; gap: 5px; cursor: pointer;
}
.ins-highlight-circle {
    width: 62px; height: 62px;
    border-radius: 50%;
    background-color: #fafafa;
    border: 1px solid #ddd; /* 极细的边框 */
    background-size: cover; background-position: center;
    display: flex; justify-content: center; align-items: center;
}
/* 那个加号按钮 */
.ins-highlight-circle.plus-btn {
    border: 1px solid #333; /* 黑圈圈 */
    background: #fff;
}
.ins-highlight-circle.plus-btn svg {
    width: 24px; height: 24px; fill: #333;
}
.ins-highlight-text { font-size: 11px; color: #333; }

/* 3. 内容流 */
.ins-feed-area { border-top: 1px solid #f0f0f0; margin-top: 10px; }
.ins-feed-tabs { display: flex; justify-content: space-around; height: 44px; align-items: center; }
.ins-tab svg { width: 24px; height: 24px; fill: #ccc; }
.ins-tab.active svg { fill: #000; }
.ins-photo-grid {
    display: grid; grid-template-columns: repeat(3, 1fr); gap: 2px;
}
.ins-grid-item {
    aspect-ratio: 1/1;
    background-color: #f0f0f0;
    background-size: cover; background-position: center;
}
/* ====================
   Notification & Badges (新功能)
   ==================== */

/* 顶部仿真通知条 */
.ios-notification-banner {
    position: fixed;
    top: 10px; /* 稍微留点空隙，像灵动岛下面弹出来的 */
    left: 10px;
    right: 10px;
    background: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border-radius: 18px;
    padding: 12px;
    display: flex;
    align-items: center;
    gap: 12px;
    box-shadow: 0 5px 20px rgba(0,0,0,0.15);
    z-index: 99999; /* 最高层级 */
    transform: translateY(-150%); /* 默认藏在上面 */
    transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
}
.ios-notification-banner.show {
    transform: translateY(0);
}
.notif-avatar {
    width: 42px; height: 42px;
    border-radius: 50%;
    background-color: #eee;
    background-size: cover; background-position: center;
}
.notif-content { flex: 1; overflow: hidden; }
.notif-title { font-size: 14px; font-weight: 600; color: #000; margin-bottom: 2px; }
.notif-msg { font-size: 13px; color: #333; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.notif-time { font-size: 11px; color: #999; margin-left: auto; align-self: flex-start; }

/* 桌面图标红点 */
.app-badge {
    position: absolute;
    top: -6px;
    right: -6px;
    min-width: 22px;
    height: 22px;
    background-color: #ff3b30;
    color: #fff;
    font-size: 12px;
    font-weight: 600;
    border-radius: 11px;
    display: flex; justify-content: center; align-items: center;
    border: 2px solid #f5f5f5; /* 与背景色同色，制造切割感 */
    z-index: 10;
    padding: 0 4px;
    display: none; /* 默认隐藏 */
}
.app-badge.show { display: flex; }
